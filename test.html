<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>任务五：基础JavaScript练习（二)</title>
    <style type="text/css">
        .numbox {
            display: inline-block;
            background-color: red;
            border-style: none;
            margin-top: 20px;
            margin-left:10px;
            vertical-align: bottom;
        }
        .numtext {
            margin: 0 auto;
        }
    </style>
</head>
<body>
<div id ="numin">
    <p>请输入数字：</p>
    <input type="text" id="num" />
    <button type="button" id="leftin" name='add' onclick="onadd(1)">左侧入</button>
    <button type="button" id="rightin" name='add' onclick="onadd(2)">右侧入</button>
    <button type="button" id="leftout" onclick="ondel(1)">左侧出</button>
    <button type="button" id="rightout" onclick="ondel(2)">右侧出</button>
    <button type="button" id="sort" onclick="numsort()">排序</button>
</div>
<div id="numprint"></div>
</body>
<script type="text/javascript">
    //判定输入数字并添加到页面
    var valuein = document.getElementById('num');
    var valuearray = document.getElementById('numprint');
    var numarray =[];  //收集所有输入的值
    var onadd = function(i){
        //输入合法性判定
        if(isNaN(valuein.value)){
            alert("请输入数字，谢谢~");
        } else if (valuein.value>100||valuein.value<10) {
            alert("请输入10~100以内的数字，谢谢~")
        }
        else {
            //输入总量判定
            if(valuearray.childNodes.length>59){
                alert("抱歉，仅支持输入60个数据哦~")
            }else {
                numarray.push(valuein.value);
                if(i==1){
                    var addbox = document.createElement('div');
                    addbox.className = 'numbox';
                    var addtext = document.createElement('p');
                    addtext.className = 'numtext';
                    addtext.innerHTML = valuein.value;
                    addbox.appendChild(addtext);
                    addbox.style.height = parseInt(valuein.value)+40+'px';
                    valuearray.insertBefore(addbox,valuearray.childNodes[0]);
                } else {
                    var addbox = document.createElement('div');
                    addbox.className = 'numbox';
                    var addtext = document.createElement('p');
                    addtext.className = 'numtext';
                    addtext.innerHTML = valuein.value;
                    addbox.appendChild(addtext);
                    addbox.style.height = parseInt(valuein.value)+40+'px';
                    valuearray.appendChild(addbox);
                }
            }
        }
    };
    //排序功能
    var numsort = function(){
        function sortdata(a,b){
            return a-b;
        };
        numarray.sort(sortdata);
        valuearray.innerHTML="";
        for(i=0;i<numarray.length;i++){
            var addbox = document.createElement('div');
            addbox.className = 'numbox';
            var addtext = document.createElement('p');
            addtext.className = 'numtext';
            addtext.innerHTML = numarray[i];
            addbox.appendChild(addtext);
            addbox.style.height = parseInt(numarray[i])+40+'px';
            valuearray.appendChild(addbox);
        }
    };
    //按钮删除功能
    var ondel = function(i){
        if(i==1){
            alert(valuearray.firstChild.innerText);
            valuearray.removeChild(valuearray.firstChild);
        } else {
            alert(valuearray.lastChild.innerText);
            valuearray.removeChild(valuearray.lastChild);
        }
    };
    //点击元素本身删除功能
    valuearray.addEventListener("click",function(){
        if(event.target.nodeName.toLowerCase()=="div"){
            valuearray.removeChild(event.target);
        }
    })
    valuearray.addEventListener("click",function(){
        if(event.target.nodeName.toLowerCase()=="p"){
            valuearray.removeChild(event.target.parentNode);
        }
    })
</script>
</html>